{"cells":[{"kind":1,"language":"markdown","value":"First check to see whether you have a builder already configured"},{"kind":2,"language":"shellscript","value":"docker buildx ls"},{"kind":1,"language":"markdown","value":"Nick Adcock has created two nodes for us, there's a `docker/labs_linux-amd64` node and a `docker/labs_linux-arm64` node."},{"kind":2,"language":"shellscript","value":"docker buildx create --driver cloud --name hydrobuild --platform linux/amd64 docker/labs_linux-amd64"},{"kind":1,"language":"markdown","value":"The next command \"appends\" the arm64 node to the previous builder."},{"kind":2,"language":"shellscript","value":"docker buildx create --driver cloud --name hydrobuild --platform linux/arm64 docker/labs_linux-arm64 --append"},{"kind":1,"language":"markdown","value":"At this point, the `hydrobuild` builder can do multi-platform builds."},{"kind":2,"language":"shellscript","value":"docker buildx build --builder hydrobuild --platform linux/amd64,linux/arm64 --tag vonwig/lsp:latest --file Dockerfile.lsp-dist --push ."}]}